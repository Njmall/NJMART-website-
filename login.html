<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>NJ Mart â€” Login</title>

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

  <!-- Firebase SDK (compat build) -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

  <style>
    /* ---------------- Root Theme ---------------- */
    :root{
      --accent:#2db34a;
      --accent-dark:#1f8a34;
      --bg:linear-gradient(180deg,#eef8f1,#f7fbf8);
      --muted:#6b7280;
      --card:#ffffff;
      --radius:14px;
      --shadow:0 10px 30px rgba(12,30,40,0.06);
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,Arial;background:var(--bg);color:#111}

    .wrap{max-width:1100px;margin:20px auto;padding:16px}
    .card{background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow);padding:20px}

    /* Header */
    header{display:flex;align-items:center;gap:12px;padding:16px;background:#fff;border-radius:12px;box-shadow:var(--shadow);margin-bottom:20px}
    .logo{width:60px;height:60px;border-radius:12px;background:linear-gradient(135deg,var(--accent),var(--accent-dark));display:flex;align-items:center;justify-content:center;color:#fff;font-weight:800;font-size:20px}
    .brand h1{margin:0;font-size:20px}
    .brand p{margin:2px 0 0;font-size:13px;color:var(--muted)}

    /* Layout */
    .layout{display:grid;grid-template-columns:420px 1fr;gap:20px}
    @media(max-width:960px){ .layout{grid-template-columns:1fr} }

    /* Left info */
    aside{padding:20px;background:linear-gradient(180deg,#f7fff5,#f0fbf3);border-radius:12px;display:flex;flex-direction:column;justify-content:space-between}
    .hero{display:flex;gap:14px;align-items:center}
    .hero .ill{width:100px;height:100px;border-radius:12px;background:#fff;display:flex;align-items:center;justify-content:center;box-shadow:0 10px 30px rgba(45,179,74,0.06)}
    .hero h2{margin:0;font-size:20px}
    .hero p{margin:4px 0 0;color:var(--muted);font-size:14px}

    /* Right login */
    .tabs{display:flex;gap:10px;margin-bottom:16px}
    .tab{flex:1;padding:10px;border-radius:10px;text-align:center;cursor:pointer;font-weight:700;border:1px solid #e6eef0}
    .tab.active{background:linear-gradient(90deg,var(--accent),var(--accent-dark));color:#fff}

    .field{display:flex;flex-direction:column;margin-bottom:12px}
    label{font-size:13px;margin-bottom:4px;color:var(--muted)}
    input{padding:12px;border-radius:10px;border:1px solid #e6eef0;font-size:14px}
    .btn{padding:12px;border-radius:10px;border:0;font-weight:700;cursor:pointer}
    .btn.primary{background:var(--accent);color:#fff}
    .btn.google{background:#db4437;color:#fff}
    .btn.ghost{background:#fff;border:1px solid #e6eef0}
    .msg{margin-top:6px;font-size:13px;color:var(--muted)}
    .msg.error{color:#b12727;font-weight:600}
    .msg.success{color:#167820;font-weight:600}

    .support{margin-top:20px;font-size:13px;color:var(--muted)}
    .support strong{color:var(--accent)}
  </style>
</head>
<body>
  <div class="wrap">

    <!-- Header -->
    <header>
      <div class="logo">NJ</div>
      <div class="brand">
        <h1>NJ Mart</h1>
        <p>Fresh groceries Â· Fast delivery</p>
      </div>
      <div style="margin-left:auto;text-align:right;font-size:13px">
        <div>Support</div>
        <strong>+91 7062918607</strong><br>
        <span>nitin14142000@gmail.com</span>
      </div>
    </header>

    <div class="layout">
      <!-- Left Info -->
      <aside>
        <div>
          <div class="hero">
            <div class="ill">
              ðŸ›’
            </div>
            <div>
              <h2>Login Securely</h2>
              <p>Sign in with Google or verify using OTP.</p>
            </div>
          </div>
        </div>
        <div class="support">
          Need help? Call <strong>7062918607</strong><br>
          or email <strong>nitin14142000@gmail.com</strong>
        </div>
      </aside>

      <!-- Right Login -->
      <main>
        <div class="card">
          <div class="tabs">
            <div class="tab active" id="tabGoogle">Google</div>
            <div class="tab" id="tabPhone">Phone OTP</div>
          </div>

          <!-- Google -->
          <section id="googleSection">
            <button id="btnGoogle" class="btn google" style="width:100%">Continue with Google</button>
            <div id="googleMsg" class="msg"></div>
          </section>

          <!-- Phone OTP -->
          <section id="phoneSection" style="display:none">
            <div class="field">
              <label for="phoneInput">Phone number</label>
              <input id="phoneInput" type="tel" placeholder="+91 91234 56789"/>
            </div>
            <div id="recaptcha-container"></div>
            <button id="btnSendOTP" class="btn primary" style="width:100%;margin-top:10px">Send OTP</button>

            <div class="field" style="margin-top:10px">
              <label for="otpInput">Enter OTP</label>
              <input id="otpInput" type="text" placeholder="123456"/>
            </div>
            <button id="btnVerifyOTP" class="btn primary" style="width:100%">Verify OTP</button>
            <div id="phoneMsg" class="msg"></div>
          </section>
        </div>
      </main>
    </div>
  </div>

  <script>
    // ------------ Firebase Config ------------
    const firebaseConfig = {
      apiKey: "AIzaSyCCyk9ZfXo2EgAFg3tWsF4N5_8fgncnZSI",
      authDomain: "njmartonline.firebaseapp.com",
      projectId: "njmartonline",
      storageBucket: "njmartonline.appspot.com",
      messagingSenderId: "594505763627",
      appId: "1:594505763627:web:a13b0d3ef40e620f9b936e"
    };
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();

    // ------------ Helpers ------------
    const $ = id => document.getElementById(id);
    function setMsg(id,text,type){let el=$(id);el.textContent=text||'';el.className='msg '+(type||'')}

    // ------------ Tabs ------------
    function showTab(tab){
      $('googleSection').style.display = (tab==='google')?'block':'none';
      $('phoneSection').style.display = (tab==='phone')?'block':'none';
      $('tabGoogle').classList.toggle('active',tab==='google');
      $('tabPhone').classList.toggle('active',tab==='phone');
    }
    $('tabGoogle').onclick=()=>showTab('google');
    $('tabPhone').onclick=()=>showTab('phone');

    // ------------ Google Sign-in ------------
    $('btnGoogle').onclick = async ()=>{
      try{
        const provider = new firebase.auth.GoogleAuthProvider();
        const result = await auth.signInWithPopup(provider);
        setMsg('googleMsg','Signed in as '+result.user.displayName,'success');
        redirectAfterLogin();
      }catch(e){ setMsg('googleMsg',e.message,'error'); }
    };
       // ------------ Phone OTP ------------
    let recaptchaVerifier = new firebase.auth.RecaptchaVerifier('recaptcha-container',{size:'invisible'});
    let confirmationResult;

    $('btnSendOTP').onclick=async ()=>{
      const phone=$('phoneInput').value.trim();
      if(!phone){setMsg('phoneMsg','Enter phone','error');return;}
      try{
        confirmationResult = await auth.signInWithPhoneNumber(phone,recaptchaVerifier);
        setMsg('phoneMsg','OTP sent','success');
      }catch(e){setMsg('phoneMsg',e.message,'error');}
    };

    $('btnVerifyOTP').onclick=async ()=>{
      const code=$('otpInput').value.trim();
      if(!code){setMsg('phoneMsg','Enter OTP','error');return;}
      try{
        await confirmationResult.confirm(code);
        setMsg('phoneMsg','Phone verified','success');
        redirectAfterLogin();
      }catch(e){setMsg('phoneMsg',e.message,'error');}
    };

    // ------------ Redirect after login ------------
    function redirectAfterLogin(){
      setTimeout(()=>{window.location.href='index.html'},1000);
    }

    auth.onAuthStateChanged(user=>{
      if(user){ redirectAfterLogin(); }
    });
  </script>
</body>
</html>
